(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();const d={value:"",unit:null},f={name:"",quantifierA:d,quantifierB:d},_={NEW_ENTRY:f},u=(n,t)=>{let e=n.querySelector(`#${t}`);return e||(e=document.createElement("div"),e.setAttribute("id",t),n.appendChild(e)),e},l=n=>{if(!n)return"";const{value:t,unit:e}=n;if(e=="kg")return`${t}${e}`;if(e=="r/s")return t},m=()=>{const n=document.documentElement,t=n.dataset.theme==="dark";n.dataset.theme=t?"light":"dark";const e=document.getElementById("toggle");e&&(e.innerText=t?"üåô":"‚òÄÔ∏è")},v=(n,t)=>{const e=Array.from({length:n.length},()=>new Array(t.length));for(let s=0;s<n.length;s++)e[s][0]=s;for(let s=0;s<t.length;s++)e[0][s]=s;for(let s=1;s<n.length;s++)for(let r=1;r<t.length;r++)n[s]===t[r]?e[s][r]=e[s-1][r-1]:e[s][r]=Math.min(e[s][r-1]+1,e[s-1][r]+1,e[s-1][r-1]+1);return e[n.length-1][t.length-1]},a=(n,t)=>{if(n.length===0)return t.length>0?1:0;if(t.length===0)return 1;let e=0;for(const s of n){let r=1/0;for(const o of t){const i=v(s,o);if(i<r&&(r=i),r===0)break}e+=r}return e/n.length};class p{tokenisedWords=[];constructor(t){for(const e of t)this.tokenisedWords.push({tokens:e.toLowerCase().split(" "),original:e})}query(t){return this.tokenisedWords.slice().sort((s,r)=>a(t,s.tokens)-a(t,r.tokens)).map(s=>s.original)}size(){return this.tokenisedWords.length}}class y{state;object;_current_focus;cursor_row_idx;cursor_col_idx;constructor(t){this.object=t,this.cursor_row_idx=-1,this.cursor_col_idx=-1,this.state=[],this._current_focus=null}placeCaretAtEnd(t){const e=document.createRange(),s=window.getSelection();s&&(e.selectNodeContents(t),e.collapse(!1),s.removeAllRanges(),s.addRange(e))}asString(){let t="";for(const e of this.state){const{name:s,quantifierA:r,quantifierB:o}=e;t+=`${s}: ${l(r)} ${l(o)} 
`}return t}async saveToClipboard(){try{await navigator.clipboard.writeText(this.asString())}catch{return!1}return!0}renderEntry(t){t===void 0&&(t=this.cursor_row_idx);const e=u(this.object,`entry-${t}`);e.setAttribute("class","entry");const s=this.state[t];if(!s)throw new Error("TextBox(renderEntry): No Entry to Render");const{name:r,quantifierA:o,quantifierB:i}=s;e.innerHTML=`
		<div id="c0">${r}</div>
		<div id="c1">${l(o)}</div>
		<div id="c2">${l(i)}</div>
		`,this.object.appendChild(e)}newEntry(){this.state.push({..._.NEW_ENTRY});const t=u(this.object,`entry-${this.cursor_row_idx}`);t.setAttribute("class","entry"),t.innerHTML=`
        <div class="container">
		<div class="cell"" inputmode="search" data-col="0"></div>
        </div>
		<div class="cell" inputmode="decimal" data-col="1"></div>
		<div class="cell" inputmode="decimal" data-col="2"></div>
		`}onInput=()=>{if(!this.current_focus)return;let t=this.state[this.cursor_row_idx];switch(this.cursor_col_idx){case 0:t.name=this.current_focus.innerText;let e=document.getElementById("suggest");if(!e)break;e.innerHTML="<ul>"+g.query(t.name.split(" ")).map((r,o)=>`<li data-col="${o}">`+r+"</li>").join(" ")+"</ul>",e.querySelectorAll("li").forEach(r=>{r.addEventListener("mousedown",o=>{const i=Number(r.dataset.col);o.preventDefault(),this.selectSuggestion(i),this.destroySuggestionBox()})}),this.highlightSuggestion();break;case 1:t.quantifierA={value:this.current_focus.innerText,unit:"kg"};break;case 2:t.quantifierB={value:this.current_focus.innerText,unit:"r/s"};break;default:throw new Error("Invalid cursor_col_idx")}console.log(this.state)};destroySuggestionBox=()=>{document.getElementById("suggest")?.remove()};selectionIndex=0;suggestionsBox=(()=>{this.selectionIndex=0;const t=document.createElement("div");return t.id="suggest",t.classList.add("suggestions","hide-scrollbar"),t})();onFocusShowSuggestions=()=>{const t=this.suggestionsBox;this._current_focus?.after(t),this.selectionIndex=0,this.highlightSuggestion()};selectSuggestion=(t=this.selectionIndex)=>{const e=document.getElementById("suggest");if(!e||!this.current_focus)return;const s=e?.querySelector(`[data-col="${t}"]`);s&&this.current_focus&&(this.current_focus.innerText=s.innerText,this.destroySuggestionBox(),this.state[this.cursor_row_idx].name=s.innerText,this.advanceCursor())};highlightSuggestion(){document.getElementById("suggest")?.querySelectorAll("li").forEach((e,s)=>{s===this.selectionIndex?e.classList.add("highlighted"):e.classList.remove("highlighted")})}handleSuggestSelection=t=>{t.key==="."&&(t.shiftKey||t.getModifierState("CapsLock"))||t.key===">"?(t.preventDefault(),this.selectionIndex!=0&&(this.selectionIndex=this.selectionIndex-1),console.log("Retr"),this.highlightSuggestion()):t.key==="."&&(t.preventDefault(),this.selectionIndex=(this.selectionIndex+1)%g.size(),this.highlightSuggestion(),console.log("Adv")),t.key==="Enter"&&(t.preventDefault(),this.selectSuggestion(this.selectionIndex))};set current_focus(t){this._current_focus?.removeEventListener("keydown",this.handleSuggestSelection),this._current_focus?.removeEventListener("input",this.onInput),this._current_focus?.removeEventListener("blur",this.destroySuggestionBox),this._current_focus?.removeEventListener("focus",this.onFocusShowSuggestions),this._current_focus=t,this._current_focus?.addEventListener("input",this.onInput),this.cursor_col_idx===0&&(this._current_focus?.addEventListener("blur",this.destroySuggestionBox),this._current_focus?.addEventListener("focus",this.onFocusShowSuggestions),this._current_focus?.addEventListener("keydown",this.handleSuggestSelection))}get current_focus(){return this._current_focus}advanceCursor=()=>{this.current_focus&&this.current_focus.removeAttribute("contenteditable"),(this.cursor_col_idx=(this.cursor_col_idx+1)%3)===0&&(console.log("End of row - creating new entry"),this.cursor_row_idx++,document.getElementById(`entry-${this.cursor_row_idx}`)||this.newEntry());const t=u(this.object,`entry-${this.cursor_row_idx}`);if(this.current_focus=t.querySelector(`[data-col="${this.cursor_col_idx}"]`),!this.current_focus)throw new Error("Cell does not exist");this.current_focus.setAttribute("contenteditable","true"),this.current_focus.focus({preventScroll:!0}),this.placeCaretAtEnd(this.current_focus)};retreatCursor=()=>{if(this.cursor_row_idx<=0&&this.cursor_col_idx<=0){console.log("Cannot retreat cursor"),this.current_focus&&this.current_focus.focus({preventScroll:!0});return}this.current_focus&&this.current_focus.removeAttribute("contenteditable"),this.cursor_col_idx--,this.cursor_col_idx<0&&(this.cursor_col_idx=2,this.cursor_row_idx--);const t=u(this.object,`entry-${this.cursor_row_idx}`);if(this.current_focus=t.querySelector(`[data-col="${this.cursor_col_idx}"]`),!this.current_focus)throw new Error("Cell does not exist");this.current_focus.setAttribute("contenteditable","true"),this.current_focus.focus({preventScroll:!0}),this.placeCaretAtEnd(this.current_focus)}}function h(n,t=3e3){const e=document.getElementById("popup-container");if(!e)return;const s=document.createElement("div");s.className="popup",s.textContent=n,e.appendChild(s),setTimeout(()=>{s.remove()},t)}document.querySelector("#app").innerHTML=`
<div>
	<h1>Workaround</h1>
	<div id="textbox" class="textbox"></div>
		<div class="navigation">
			<button id="tab-l">‚Üê</button>
			<button id="tab-r">‚Üí</button>
            <button id="clipboard">üìã</button>
		</div>
	</div>
</div>
`;const c=new y(document.getElementById("textbox")),g=new p(["Bench Press","Lat Pulldown","Upright Row","Reverse Fly","Bicep Curl (incline)","Bicep Curl (standing)","Hammer Curl","Shoulder Press","Tricep Push Down","Lat Raise (cable)","Lat Raise (machine)","Cable Ab Crunch","Squat","Run"]);document.getElementById("tab-r")?.addEventListener("click",c.advanceCursor);document.getElementById("tab-l")?.addEventListener("click",c.retreatCursor);document.addEventListener("keydown",n=>{n.key==="Tab"&&n.shiftKey?(n.preventDefault(),c.retreatCursor()):n.key==="Tab"&&(n.preventDefault(),c.advanceCursor())});document.getElementById("clipboard")?.addEventListener("click",async()=>{if(await c.saveToClipboard()){h("Saved to Clipboard");return}h("Failed to save to Clipboard")});document.getElementById("toggle")?.addEventListener("click",m);document.documentElement.dataset.theme=document.documentElement.dataset.theme==="dark"?"light":"dark";
